{% extends 'base.html' %}

{% block title %}Chat{% endblock %}
{% block css %}
<link rel="stylesheet" href="/stylesheets/chat.css"/>
{% endblock %}

{% block js %}
<script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
{% endblock %}

{% block content %}

<div class="messages-container">
	<ul id="messages"></ul>
</div>
<div class="message-form-container">
	<form action="">
		<input id="m" autocomplete="off" /><button class="btn">Send</button>
	</form>
</div>

<script>
var socket = io();
$('form').submit(function(){
	console.log("here");
	socket.emit('chat message', $('#m').val());
	$('#m').val('');
	console.log("here1");
	return false;
});
socket.on('chat message', function(msg){
	console.log(msg);
	$('#messages').append($('<li>').text(msg));
});
</script>
{% endblock %}
